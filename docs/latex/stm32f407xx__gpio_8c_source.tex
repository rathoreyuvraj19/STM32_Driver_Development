\doxysection{stm32f407xx\+\_\+gpio.\+c}
\hypertarget{stm32f407xx__gpio_8c_source}{}\label{stm32f407xx__gpio_8c_source}\index{Projects/003\_Testing\_stm32f407xx\_drivers/Drivers/src/stm32f407xx\_gpio.c@{Projects/003\_Testing\_stm32f407xx\_drivers/Drivers/src/stm32f407xx\_gpio.c}}
\mbox{\hyperlink{stm32f407xx__gpio_8c}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00001}00001\ }
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00037}00037\ }
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00038}00038\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{stm32f407xx__gpio_8h}{stm32f407xx\_gpio.h}}"{}}}
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00039}00039\ }
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00049}\mbox{\hyperlink{stm32f407xx__gpio_8c_a10eb7b8d2cd68d8c3495beb9339c516f}{00049}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{stm32f407xx__gpio_8c_a10eb7b8d2cd68d8c3495beb9339c516f}{gpio\_init}}(\mbox{\hyperlink{struct_g_p_i_ox___handle__t}{GPIOx\_Handle\_t}}\ *pGPIOHandle)}
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00050}00050\ \{}
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00051}00051\ \ \ \ \ uint32\_t\ temp\ =\ 0;}
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00052}00052\ }
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00053}00053\ \ \ \ \ \textcolor{comment}{/*\ 1.\ Enable\ the\ peripheral\ clock\ */}}
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00054}00054\ \ \ \ \ \textcolor{keywordflow}{if}(pGPIOHandle-\/>\mbox{\hyperlink{struct_g_p_i_ox___handle__t_af66476d0b69ef00a95863c8d55a33208}{pGPIOx}}\ ==\ \mbox{\hyperlink{group___g_p_i_ox___r_e_g___d_e_f_gac485358099728ddae050db37924dd6b7}{GPIOA}})\ \mbox{\hyperlink{group___a_h_b1___p_c_l_k___e_n___d_i___m_a_c_r_o_s_ga17c0eb1a7e7645a5d63d8b7a41fbb19c}{GPIOA\_PCLK\_EN}}();}
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00055}00055\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(pGPIOHandle-\/>\mbox{\hyperlink{struct_g_p_i_ox___handle__t_af66476d0b69ef00a95863c8d55a33208}{pGPIOx}}\ ==\ \mbox{\hyperlink{group___g_p_i_ox___r_e_g___d_e_f_ga68b66ac73be4c836db878a42e1fea3cd}{GPIOB}})\ \mbox{\hyperlink{group___a_h_b1___p_c_l_k___e_n___d_i___m_a_c_r_o_s_ga1bc2b8b73bb42c4d2cd758a732fbe871}{GPIOB\_PCLK\_EN}}();}
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00056}00056\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(pGPIOHandle-\/>\mbox{\hyperlink{struct_g_p_i_ox___handle__t_af66476d0b69ef00a95863c8d55a33208}{pGPIOx}}\ ==\ \mbox{\hyperlink{group___g_p_i_ox___r_e_g___d_e_f_ga2dca03332d620196ba943bc2346eaa08}{GPIOC}})\ \mbox{\hyperlink{group___a_h_b1___p_c_l_k___e_n___d_i___m_a_c_r_o_s_gab9e994b2e5e4ada47764117634c64728}{GPIOC\_PCLK\_EN}}();}
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00057}00057\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(pGPIOHandle-\/>\mbox{\hyperlink{struct_g_p_i_ox___handle__t_af66476d0b69ef00a95863c8d55a33208}{pGPIOx}}\ ==\ \mbox{\hyperlink{group___g_p_i_ox___r_e_g___d_e_f_ga7580b1a929ea9df59725ba9c18eba6ac}{GPIOD}})\ \mbox{\hyperlink{group___a_h_b1___p_c_l_k___e_n___d_i___m_a_c_r_o_s_gac08ecd1bbe57ab59746d6da5b972f493}{GPIOD\_PCLK\_EN}}();}
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00058}00058\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(pGPIOHandle-\/>\mbox{\hyperlink{struct_g_p_i_ox___handle__t_af66476d0b69ef00a95863c8d55a33208}{pGPIOx}}\ ==\ \mbox{\hyperlink{group___g_p_i_ox___r_e_g___d_e_f_gae04bdb5e8acc47cab1d0532e6b0d0763}{GPIOE}})\ \mbox{\hyperlink{group___a_h_b1___p_c_l_k___e_n___d_i___m_a_c_r_o_s_gaa93bc85ce9310ae89c709ad615d9bb18}{GPIOE\_PCLK\_EN}}();}
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00059}00059\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(pGPIOHandle-\/>\mbox{\hyperlink{struct_g_p_i_ox___handle__t_af66476d0b69ef00a95863c8d55a33208}{pGPIOx}}\ ==\ \mbox{\hyperlink{group___g_p_i_ox___r_e_g___d_e_f_ga43c3022dede7c9db7a58d3c3409dbc8d}{GPIOF}})\ \mbox{\hyperlink{group___a_h_b1___p_c_l_k___e_n___d_i___m_a_c_r_o_s_ga1a46c65e3a2959ce65c503bc735d45ea}{GPIOF\_PCLK\_EN}}();}
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00060}00060\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(pGPIOHandle-\/>\mbox{\hyperlink{struct_g_p_i_ox___handle__t_af66476d0b69ef00a95863c8d55a33208}{pGPIOx}}\ ==\ \mbox{\hyperlink{group___g_p_i_ox___r_e_g___d_e_f_ga02a2a23a32f9b02166a8c64012842414}{GPIOG}})\ \mbox{\hyperlink{group___a_h_b1___p_c_l_k___e_n___d_i___m_a_c_r_o_s_ga84b14038fe3d35ca857056c98f796c64}{GPIOG\_PCLK\_EN}}();}
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00061}00061\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(pGPIOHandle-\/>\mbox{\hyperlink{struct_g_p_i_ox___handle__t_af66476d0b69ef00a95863c8d55a33208}{pGPIOx}}\ ==\ \mbox{\hyperlink{group___g_p_i_ox___r_e_g___d_e_f_gadeacbb43ae86c879945afe98c679b285}{GPIOH}})\ \mbox{\hyperlink{group___a_h_b1___p_c_l_k___e_n___d_i___m_a_c_r_o_s_ga2be7b357e112e2036141678aa6bc3506}{GPIOH\_PCLK\_EN}}();}
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00062}00062\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(pGPIOHandle-\/>\mbox{\hyperlink{struct_g_p_i_ox___handle__t_af66476d0b69ef00a95863c8d55a33208}{pGPIOx}}\ ==\ \mbox{\hyperlink{group___g_p_i_ox___r_e_g___d_e_f_gad15f13545ecdbbabfccf43d5997e5ade}{GPIOI}})\ \mbox{\hyperlink{group___a_h_b1___p_c_l_k___e_n___d_i___m_a_c_r_o_s_gae7a11cdb49af5cb6c9fa08a57d474eba}{GPIOI\_PCLK\_EN}}();}
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00063}00063\ }
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00064}00064\ \ \ \ \ \textcolor{comment}{/*\ 2.\ Configure\ GPIO\ mode\ */}}
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00065}00065\ \ \ \ \ temp\ =\ (pGPIOHandle-\/>GPIO\_Config.GPIO\_Mode\ <<\ (2\ *\ pGPIOHandle-\/>GPIO\_Config.GPIO\_PinNumber));}
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00066}00066\ \ \ \ \ pGPIOHandle-\/>\mbox{\hyperlink{struct_g_p_i_ox___handle__t_af66476d0b69ef00a95863c8d55a33208}{pGPIOx}}-\/>\mbox{\hyperlink{struct_g_p_i_ox___reg_def__t_a7131c3ab513a84fc69270888ddbe561d}{MODER}}\ \&=\ \string~(0x3\ <<\ (2\ *\ pGPIOHandle-\/>GPIO\_Config.GPIO\_PinNumber));\ \textcolor{comment}{//\ clear}}
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00067}00067\ \ \ \ \ pGPIOHandle-\/>\mbox{\hyperlink{struct_g_p_i_ox___handle__t_af66476d0b69ef00a95863c8d55a33208}{pGPIOx}}-\/>\mbox{\hyperlink{struct_g_p_i_ox___reg_def__t_a7131c3ab513a84fc69270888ddbe561d}{MODER}}\ |=\ temp;}
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00068}00068\ }
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00069}00069\ \ \ \ \ \textcolor{comment}{/*\ 3.\ Configure\ output\ type\ */}}
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00070}00070\ \ \ \ \ temp\ =\ (pGPIOHandle-\/>GPIO\_Config.GPIO\_OP\_Type\ <<\ pGPIOHandle-\/>GPIO\_Config.GPIO\_PinNumber);}
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00071}00071\ \ \ \ \ pGPIOHandle-\/>\mbox{\hyperlink{struct_g_p_i_ox___handle__t_af66476d0b69ef00a95863c8d55a33208}{pGPIOx}}-\/>\mbox{\hyperlink{struct_g_p_i_ox___reg_def__t_a487e307dd27a1a694f8a52f1a2df6ce6}{OTYPER}}\ \&=\ \string~(0x1\ <<\ pGPIOHandle-\/>GPIO\_Config.GPIO\_PinNumber);\ \textcolor{comment}{//\ clear}}
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00072}00072\ \ \ \ \ pGPIOHandle-\/>\mbox{\hyperlink{struct_g_p_i_ox___handle__t_af66476d0b69ef00a95863c8d55a33208}{pGPIOx}}-\/>\mbox{\hyperlink{struct_g_p_i_ox___reg_def__t_a487e307dd27a1a694f8a52f1a2df6ce6}{OTYPER}}\ |=\ temp;}
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00073}00073\ }
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00074}00074\ \ \ \ \ \textcolor{comment}{/*\ 4.\ Configure\ speed\ */}}
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00075}00075\ \ \ \ \ temp\ =\ (pGPIOHandle-\/>GPIO\_Config.GPIO\_Speed\ <<\ (2\ *\ pGPIOHandle-\/>GPIO\_Config.GPIO\_PinNumber));}
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00076}00076\ \ \ \ \ pGPIOHandle-\/>\mbox{\hyperlink{struct_g_p_i_ox___handle__t_af66476d0b69ef00a95863c8d55a33208}{pGPIOx}}-\/>\mbox{\hyperlink{struct_g_p_i_ox___reg_def__t_a3b356447d7a412130d1bc5b33cb4b7a0}{OSPEEDR}}\ \&=\ \string~(0x3\ <<\ (2\ *\ pGPIOHandle-\/>GPIO\_Config.GPIO\_PinNumber));}
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00077}00077\ \ \ \ \ pGPIOHandle-\/>\mbox{\hyperlink{struct_g_p_i_ox___handle__t_af66476d0b69ef00a95863c8d55a33208}{pGPIOx}}-\/>\mbox{\hyperlink{struct_g_p_i_ox___reg_def__t_a3b356447d7a412130d1bc5b33cb4b7a0}{OSPEEDR}}\ |=\ temp;}
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00078}00078\ }
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00079}00079\ \ \ \ \ \textcolor{comment}{/*\ 5.\ Configure\ pull-\/up/pull-\/down\ */}}
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00080}00080\ \ \ \ \ temp\ =\ (pGPIOHandle-\/>GPIO\_Config.GPIO\_PU\_PD\ <<\ (2\ *\ pGPIOHandle-\/>GPIO\_Config.GPIO\_PinNumber));}
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00081}00081\ \ \ \ \ pGPIOHandle-\/>\mbox{\hyperlink{struct_g_p_i_ox___handle__t_af66476d0b69ef00a95863c8d55a33208}{pGPIOx}}-\/>\mbox{\hyperlink{struct_g_p_i_ox___reg_def__t_a9e83c5fefbd8c0caff3dc3dccd4cfa6f}{PUPDR}}\ \&=\ \string~(0x3\ <<\ (2\ *\ pGPIOHandle-\/>GPIO\_Config.GPIO\_PinNumber));}
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00082}00082\ \ \ \ \ pGPIOHandle-\/>\mbox{\hyperlink{struct_g_p_i_ox___handle__t_af66476d0b69ef00a95863c8d55a33208}{pGPIOx}}-\/>\mbox{\hyperlink{struct_g_p_i_ox___reg_def__t_a9e83c5fefbd8c0caff3dc3dccd4cfa6f}{PUPDR}}\ |=\ temp;}
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00083}00083\ }
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00084}00084\ \ \ \ \ \textcolor{comment}{/*\ 6.\ Configure\ alternate\ function\ (if\ selected)\ */}}
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00085}00085\ \ \ \ \ \textcolor{keywordflow}{if}(pGPIOHandle-\/>GPIO\_Config.GPIO\_Mode\ ==\ \mbox{\hyperlink{group___g_p_i_o___m_o_d_e_s_gaf97227968696e5e26432760060e61e48}{GPIO\_MODE\_ALT\_FUNC}})}
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00086}00086\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00087}00087\ \ \ \ \ \ \ \ \ uint8\_t\ pin\ =\ pGPIOHandle-\/>GPIO\_Config.GPIO\_PinNumber;}
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00088}00088\ \ \ \ \ \ \ \ \ uint8\_t\ afr\_index\ =\ pin\ /\ 8;}
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00089}00089\ \ \ \ \ \ \ \ \ uint8\_t\ afr\_position\ =\ pin\ \%\ 8;}
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00090}00090\ }
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00091}00091\ \ \ \ \ \ \ \ \ pGPIOHandle-\/>\mbox{\hyperlink{struct_g_p_i_ox___handle__t_af66476d0b69ef00a95863c8d55a33208}{pGPIOx}}-\/>AFR[afr\_index]\ \&=\ \string~(0xF\ <<\ (4\ *\ afr\_position));}
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00092}00092\ \ \ \ \ \ \ \ \ pGPIOHandle-\/>\mbox{\hyperlink{struct_g_p_i_ox___handle__t_af66476d0b69ef00a95863c8d55a33208}{pGPIOx}}-\/>AFR[afr\_index]\ |=\ (pGPIOHandle-\/>GPIO\_Config.GPIO\_ALT\_FUNC\ <<\ (4\ *\ afr\_position));}
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00093}00093\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00094}00094\ \}}
\DoxyCodeLine{\Hypertarget{stm32f407xx__gpio_8c_source_l00095}00095\ }

\end{DoxyCode}
